<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script type="module">
        export function sum(a, b) {
            let res = 0;
            for (let i =0;i<1000000;i++) {
                res+=i;
            }
            return a+b;
        }
        try {


            const module = await import('./build/release.js');
            console.log("Module loaded:", module);
            console.log("add result: ", module.add(1, 44));
            performance.mark('WASM_start')
            console.log("sum result: ", module.sum(1, 44));

            performance.mark('WASM_end')
            performance.measure('WASM_time', 'WASM_start', 'WASM_end')
            console.log(performance.getEntriesByName('WASM_time'));
            console.log("-----------------------------------")

            
            performance.mark('js_start')
            console.log("sum result: ", sum(1, 44));

            performance.mark('js_end')
            performance.measure('js_time', 'js_start', 'js_end')
            console.log(performance.getEntriesByName('js_time'));
        } catch (error) {
            console.error("Error loading module:", error);
        }
    </script>
    <h3>hello</h3>
</body>
</html>